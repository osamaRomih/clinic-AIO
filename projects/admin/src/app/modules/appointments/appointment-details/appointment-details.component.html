<div class="page-wrapper">

  <div class="d-flex align-items-center gap-2 mb-4">
    <button mat-icon-button color="primary" (click)="goBack()">
      <mat-icon>arrow_back</mat-icon>
    </button>
    <div>
      <h4 class="h4 fw-bold m-0">
        {{ 'APPOINTMENT_DETAILS.TITLE' | translate }}
      </h4>
    </div>
  </div>

  <div class="row">

    <div class="col-12 col-lg-8 mb-4 mb-lg-0">

      <mat-card appearance="outlined">
        <mat-card-header class="border-bottom pb-3 mb-3">
          <mat-card-title>
            <h2 class="h5 fw-semibold m-0">{{ 'APPOINTMENT_DETAILS.TITLE' | translate }}</h2>
          </mat-card-title>
        </mat-card-header>
        <mat-card-content class="p-4">

          <div class="row mb-4">

            <div class="col-12 col-md-6 mb-3">
              <span class="text-sm fw-medium text-muted d-block">{{ 'APPOINTMENT_DETAILS.DATE' | translate }}</span>
              <span class="fw-medium h6">{{ appointment.date }}</span>
            </div>

            <div class="col-12 col-md-6 mb-3">
              <span class="text-sm fw-medium text-muted d-block">{{ 'APPOINTMENT_DETAILS.TIME' | translate }}</span>
              <span class="fw-medium h6">{{ appointment.startTime|timeShort }} - {{ appointment.endTime|timeShort
                }}</span>
            </div>

            <div class="col-12 col-md-6 mb-3">
              <span class="text-sm fw-medium text-muted d-block">{{ 'APPOINTMENT_DETAILS.STATUS' | translate }}</span>
              <span class="fw-medium h6 text-success">{{ appointment.status }}</span>
            </div>

            <div class="col-12 col-md-6 mb-3">
              <span class="text-sm fw-medium text-muted d-block">{{ 'APPOINTMENT_DETAILS.TYPE' | translate }}</span>
              <span class="fw-medium h6">{{ appointment.visitType }}</span>
            </div>
          </div>

          <mat-divider></mat-divider>

          <!-- Reason for Visit -->
          <h3 class="mt-4 fw-medium mb-2 h6">{{ 'APPOINTMENT_DETAILS.REASON' | translate }}</h3>
          <p class="text-muted text-base fst-italic">{{ appointment.reasonForVisit }}</p>

        </mat-card-content>
      </mat-card>
    </div>

    <div class="col-12 col-lg-4 d-grid gap-4">

      <mat-card appearance="outlined">
        <mat-card-content>
          <h2 class="h6 fw-semibold mb-3">{{ 'APPOINTMENT_DETAILS.PATIENT_INFO_TITLE' | translate }}</h2>
          <div class="d-flex my-3 align-items-center">
            <img width="60" height="60" class="rounded-circle border border-primary"
              [src]="'http://localhost:5069'+appointment.patient.imageUrl" alt="Patient image" />
            <div class="mx-3">
              <div class="fw-medium text-base">{{appointment.patient.fullName}}</div>
              <div class="text-muted text-sm">{{ 'APPOINTMENT_DETAILS.PATIENT_ID' | translate }}
                {{appointment.patient.id}}</div>
            </div>
          </div>
          <mat-divider></mat-divider>
          <div class="mt-3">
            <div class="mb-2 d-flex align-items-center text-muted text-sm">
              <mat-icon class="me-2 text-primary">calendar_today</mat-icon>
              <span>{{appointment.patient.dateOfBirth}}</span>
            </div>
            <div class="mb-2 d-flex align-items-center text-muted text-sm">
              <mat-icon class="me-2 text-primary">phone</mat-icon>
              <span>{{appointment.patient.phoneNumber}}</span>
            </div>
            <div class="mb-2 d-flex align-items-center text-muted text-sm">
              <mat-icon class="me-2 text-primary">location_on</mat-icon>
              <span>{{appointment.patient.address}}</span>
            </div>
          </div>
          <button mat-raised-button color="primary" class="mt-3 w-100" (click)="viewPatientProfile()">
            {{ 'APPOINTMENT_DETAILS.VIEW_PROFILE' | translate }}
          </button>
        </mat-card-content>
      </mat-card>

      <!-- Actions Card -->
      <mat-card appearance="outlined">
        <mat-card-content>
          <h5 class="h6 fw-semibold mb-3 text-center">{{ 'APPOINTMENT_DETAILS.ACTION_TITLE' | translate }}</h5>

          <div class="d-flex flex-column gap-3">
            <button mat-raised-button color="warn" class="w-100" (click)="cancelAppointment()">
              <mat-icon class="me-2">event_busy</mat-icon>
              {{ 'APPOINTMENT_DETAILS.CANCEL_APPOINTMENT' | translate }}
            </button>

            <button mat-raised-button color="accent" class="w-100" (click)="rescheduleAppointment()">
              <mat-icon class="me-2">schedule</mat-icon>
              {{ 'APPOINTMENT_DETAILS.RESCHEDULE' | translate }}
            </button>
            <button mat-raised-button color="accent" class=" w-100" (click)="editAppointment()">
              <mat-icon class="me-2">edit</mat-icon>
              {{ 'APPOINTMENT_DETAILS.UPDATE_APPOINTMENT' | translate }}
            </button>
            <button mat-raised-button color="primary" class="w-100" (click)="completeVisit()">
              <mat-icon class="me-2">check_circle_outline</mat-icon>
              {{ 'APPOINTMENT_DETAILS.COMPLETE_VISIT' | translate }}
            </button>
            <button mat-flat-button color="warn" class="w-100" (click)="deleteAppointment()">
              <mat-icon class="me-2">delete</mat-icon>
              {{ 'APPOINTMENT_DETAILS.DELETE_APPOINTMENT' | translate }}
            </button>
          </div>


        </mat-card-content>
      </mat-card>
    </div>
  </div>
</div>