<div>
  <div class="p-3">
    <div class="mb-3">
      <mat-form-field class="w-100">
        <mat-label>{{ 'CHAT.SEARCH_LABEL' | translate }}</mat-label>
        <input matInput placeholder="{{ 'CHAT.SEARCH_PLACEHOLDER' | translate }}" (keyup)="onSearch($event)">
      </mat-form-field>
    </div>
    <div class="peaple-list d-flex flex-row flex-md-column overflow-auto gap-1">
      @for (user of chatService.filteredUsers(); track user.id) {
      <div class="peaple-item d-flex flex-column flex-md-row p-2 gap-2 position-relative"
        (click)="openChatWindow(user)">
        <div class="d-flex flex-column justify-content-start">
          <img [src]="'http://localhost:5069/'+user.imageUrl" class="p-img" />
        </div>
        <div class="d-flex align-items-center status position-absolute top-0 end-0 d-md-none ">
          @if(!user.isOnline){
          <mat-icon class="offline">fiber_manual_record</mat-icon>
          }@else {
          <mat-icon class="online">fiber_manual_record</mat-icon>
          }
        </div>

        <div class="d-flex flex-column justify-content-start">
          <div class="name d-md-none">{{user.fullName.split(' ')[0]}}</div>
          <div class="name d-none d-md-block">{{user.fullName}}</div>
          <div class="align-items-center status d-none d-md-flex">
            @if(!user.isOnline){
            <mat-icon class="offline">fiber_manual_record</mat-icon>
            <div> {{user.lastSeen | timeAgo}}</div>
            }@else {
            <mat-icon class="online">fiber_manual_record</mat-icon>
            <div>{{ 'USER_STATUS.ONLINE' | translate }}</div>
            @if(user.isTyping){
            <div>{{ 'USER_STATUS.TYPING' | translate }}</div>
            }
            }
          </div>
        </div>
      </div>
      }


    </div>
  </div>
</div>